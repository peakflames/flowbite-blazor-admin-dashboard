@using ApexCharts

<Card Size="CardSize.ExtraLarge" class="@($"flex items-center justify-between gap-4 p-4 sm:p-6 shadow-sm {CardClass}")">
  <div class="w-full">
    <h5 class="text-sm font-medium text-gray-500 dark:text-gray-300">@Title</h5>
    <p class="text-2xl font-bold leading-none text-gray-900 sm:text-3xl dark:text-white">@Subtitle</p>

    @if (ShowChangeIndicator)
    {
      <div class="@($"mt-2 inline-flex items-baseline gap-2 text-sm {ChangeCss}")">
        <span class="font-semibold">@FormattedChange</span>
        @if (!string.IsNullOrWhiteSpace(ChangeCaption))
        {
          <span class="text-xs text-gray-500 dark:text-gray-400">@ChangeCaption</span>
        }
      </div>
    }
  </div>

  <div class="w-full max-w-[180px] lg:max-w-[200px]">
    <ApexChart @ref="_chart"
               TItem="NumericPoint"
               Options="_options"
               Height="@(ChartHeight)">
      @if (Series?.Count > 0)
      {
        foreach (var series in Series)
        {
          <ApexPointSeries TItem="NumericPoint"
                           Items="series.Points"
                           Name="series.Name"
                           SeriesType="SeriesType.Bar"
                           Color="series.Color"
                           XValue="p => p.Category"
                           YValue="p => p.Value" />
        }
      }
    </ApexChart>
  </div>
</Card>
