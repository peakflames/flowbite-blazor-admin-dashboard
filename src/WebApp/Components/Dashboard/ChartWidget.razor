@using ApexCharts

<Card Size="CardSize.ExtraLarge" class="w-full max-w-none shadow-sm">
  <div class="mb-3 flex items-center justify-between">
    <div class="flex-shrink-0">
      <h3 class="text-2xl font-semibold text-gray-900 dark:text-white">@Title</h3>
      @if (!string.IsNullOrWhiteSpace(Subtitle))
      {
        <p class="text-base font-light text-gray-500 dark:text-gray-300">@Subtitle</p>
      }
    </div>
    @if (ShowChangeIndicator)
    {
      <div class="@($"flex flex-col items-end text-sm font-semibold {ChangeCss}")">
        <span class="inline-flex items-center gap-1 text-sm font-medium">
          <span>@FormattedChange</span>
          @if (!string.IsNullOrWhiteSpace(ChangeCaption))
          {
            <span class="text-xs text-gray-500 dark:text-gray-400">@ChangeCaption</span>
          }
        </span>
      </div>
    }
  </div>

  <ApexChart @ref="_chart"
             TItem="NumericPoint"
             Options="_options"
             Height="420">
    @if (Series?.Count > 0)
    {
      foreach (var series in Series)
      {
        <ApexPointSeries TItem="NumericPoint"
                         Items="series.Points"
                         Name="@series.Name"
                         SeriesType="SeriesType.Area"
                         Color="@series.Color"
                         XValue="p => p.Category"
                         YValue="p => p.Value" />
      }
    }
  </ApexChart>

  @if (FooterContent is not null)
  {
    <div class="mt-3 border-t border-gray-200 pt-3 text-sm text-gray-500 sm:pt-5 dark:border-gray-700 dark:text-gray-300">
      @FooterContent
    </div>
  }
</Card>
