@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime

<div class="antialiased bg-gray-50 dark:bg-gray-900">

    <div class="flex min-h-screen bg-gray-50 dark:bg-gray-900">

        <aside id="fb-sidebar"
               class="fixed inset-y-0 left-0 z-40 h-screen w-64 border-r border-gray-200 bg-white pt-16 transition-transform dark:border-gray-700 dark:bg-gray-800 lg:static lg:pt-0 lg:translate-x-0 @(_isSidebarOpen ? "translate-x-0" : "-translate-x-full")"
               aria-label="sidenav">
            <div class="flex h-full flex-col overflow-y-auto">
                <AppSidebar />
            </div>
        </aside>

        <div class="flex w-full flex-col">

            <div class="fixed inset-x-0 top-0 z-50 flex w-full lg:ml-64">
                <AppNavBar ResponsiveMenuEnabled=@true OnResponsiveMenuToggle="HandleMenuToggle" IsOpen="_isSidebarOpen" />
            </div>

            @if (_isSidebarOpen)
            {
                <div class="fixed inset-0 z-40 bg-gray-900/50 backdrop-blur-sm dark:bg-gray-900/80 lg:hidden"
                     @onclick="CloseSidebar"
                     aria-hidden="true"></div>
            }

            <main class="relative flex-1 overflow-y-auto bg-gray-50 pt-16 dark:bg-gray-900 lg:ml-64">
                <div class="px-4 pt-6 pb-8 lg:px-6 xl:px-8">
                    <div class="rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800">
                        @Body
                    </div>
                    <AppFooter />
                </div>
            </main>

        </div>

    </div>

</div>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ðŸ—™</a>
</div>

@code {
    private bool _isSidebarOpen = false;

    private void HandleMenuToggle()
    {
        _isSidebarOpen = !_isSidebarOpen;
    }

    private void CloseSidebar()
    {
        if (_isSidebarOpen)
        {
            _isSidebarOpen = false;
        }
    }
}
